#!/bin/sh

seed=0
indices=

program=`basename $0`

display_usage() {
    cat << EOS
$program  - a program to display output of recurrent neural networks by means of sequence data as input.

Usage: $program [-s seed] [-i indices] mre-file gn-file sequence-file
Usage: $program [-v] [-h]

Available options are:
-s seed
    \`seed' is the seed for the initialization of random number generator, which specifies a starting point for the random number sequence, and provides for restarting at the same point. If this option is omitted, the current system time is used.
-i indices
    \`indices' is the indices to ignore data in sequence-file. the indices are separated by a comma (ex: -i 0,2).
-v
    Prints the version information and exit.
-h
    Prints this help and exit.

Program execution:
First, $program reads the mre-file (ex: mre.dat) generated by mre-learn and gn-file (ex: gn.dat) generated by gn-learn in order to setup model parameters. Next, it displays output of a network by means of an input sequence described in sequence-file.
EOS
}


while getopts s:i:vh OPT
do
    case $OPT in
        s ) seed=${OPTARG};;
        i ) indices=${OPTARG};;
        v ) echo "$program version 1.0"
            exit 0;;
        h ) display_usage
            exit 0;;
        \?) exit 1;;
    esac
done

shift `expr $OPTIND - 1`

mre_file=$1
gn_file=$2
sequence_file=$3

if [ x = x"$1" -o x = x"$2" -o x = x"$3" ]; then
    echo "Usage: $program [-s seed] [-i indices] mre-file gn-file sequence-file"
    exit 1
fi
if [ ! -f "$mre_file" ]; then
    echo "cannot find mre-file \`$mre_file'"
    exit 1
fi
if [ ! -f "$gn_file" ]; then
    echo "cannot find gn-file \`$gn_file'"
    exit 1
fi
if [ ! -f "$sequence_file" ]; then
    echo "cannot find sequence-file \`$sequence_file'"
    exit 1
fi

python `dirname $0`/mregn_generate_with_file.py "$seed" "$indices" "$mre_file" "$gn_file" "$sequence_file"

